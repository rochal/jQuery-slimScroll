/*!
 * Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.9
 *
 */
!function(t){"use strict";t.fn.extend({slimScroll:function(i){var e={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,horizontal:!1,railClass:"slimScrollRail",barClass:"slimScrollBar",railClassH:"slimScrollRailHor",barClassH:"slimScrollBarHor",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},o=t.extend(e,i);return this.each(function(){function e(i){if(c){i=i||window.event;var e=0;i.wheelDelta&&(e=-i.wheelDelta/120),i.detail&&(e=i.detail/3);var a=i.target||i.srcTarget||i.srcElement;t(a).closest("."+o.wrapperClass).is(B.parent())&&s(0,e,!0),i.preventDefault&&!W&&i.preventDefault(),W||(i.returnValue=!1)}}function s(t,i,e,s){W=!1;var a=t,r=i,l=B.outerHeight()-x.outerHeight()-(o.horizontal?o.size:0),c=o.horizontal&&B.outerWidth()-H.outerWidth()-o.size;if(e&&(r=parseInt(x.css("top"))+i*parseInt(o.wheelStep)/100*x.outerHeight(),r=Math.min(Math.max(r,0),l),r=i>0?Math.ceil(r):Math.floor(r),x.css({top:r+"px"}),o.horizontal&&(a=parseInt(H.css("left"))+t*parseInt(o.wheelStep)/100*H.outerWidth(),a=Math.min(Math.max(a,0),c),a=t>0?Math.ceil(a):Math.floor(a),H.css({left:a+"px"}))),g=parseInt(x.css("top"))/(B.outerHeight()-x.outerHeight()),r=g*(B[0].scrollHeight-B.outerHeight()),o.horizontal&&(f=parseInt(H.css("left"))/(B.outerWidth()-H.outerWidth()),a=f*(B[0].scrollWidth-B.outerWidth())),s){r=i;var d=r/B[0].scrollHeight*B.outerHeight();if(offsetTopY=Math.min(Math.max(d,0),l),x.css({top:offsetTopY+"px"}),o.horizontal){a=t;var u=a/B[0].scrollWidth*B.outerWidth();offsetTopX=Math.min(Math.max(u,0),c),H.css({left:offsetTopX+"px"})}}B.scrollTop(r),o.horizontal&&B.scrollLeft(a),B.trigger("slimscrolling",~~r,o.horizontal&&a),n(),h()}function a(t){window.addEventListener?(t.addEventListener("DOMMouseScroll",e,!1),t.addEventListener("mousewheel",e,!1)):document.attachEvent("onmousewheel",e)}function r(){z=Math.max(B.outerHeight()/B[0].scrollHeight*B.outerHeight(),M),x.css({height:z+"px"});var t=z==B.outerHeight()?"none":"block";x.css({display:t})}function l(){if(o.horizontal){y=Math.max(B.outerWidth()/B[0].scrollWidth*B.outerWidth(),I),H.css({width:y+"px"});var t=~~y==~~B.outerWidth()?"none":"block";H.css({display:t})}}function n(){if(r(),l(),clearTimeout(p),g==~~g||f==~~f){W=o.allowPageScroll;var t,i;v!==g&&(t=0==~~g?"top":"bottom"),b!==f&&(i=0==~~f?"left":"right"),i&&B.trigger("slimscroll",t,i)}else W=!1;v=g,b=f,z>=B.outerHeight()?W=!0:(x.stop(!0,!0).fadeIn("fast"),o.railVisible&&C.stop(!0,!0).fadeIn("fast")),o.horizontal&&(y>=B.outerWidth()?W=!0:(H.stop(!0,!0).fadeIn("fast"),o.railVisible&&R.stop(!0,!0).fadeIn("fast")))}function h(){o.alwaysVisible||(p=setTimeout(function(){o.disableFadeOut&&c||d||u||(x.fadeOut("slow"),C.fadeOut("slow"),o.horizontal&&(H.fadeOut("slow"),R.fadeOut("slow")))},1e3))}var c,d,u,p,f,g,b,v,m,w,z,y,x,C,H,R,S="<div></div>",M=30,I=30,W=!1,B=t(this);if(B.parent().hasClass(o.wrapperClass)){var V=B.scrollTop();if(x=B.siblings("."+o.barClass),C=B.siblings("."+o.railClass),o.horizontal&&(H=B.siblings("."+o.barClassH),R=B.siblings("."+o.railClassH)),r(),l(),t.isPlainObject(i)){if("height"in i&&"auto"==i.height){B.parent().css("height","auto"),B.css("height","auto");var k=B.parent().parent().height();B.parent().css("height",k),B.css("height",k)}else if("height"in i){var O=i.height;B.parent().css("height",O),B.css("height",O)}if("scrollTo"in i)V=parseInt(o.scrollTo);else if("scrollBy"in i)V+=parseInt(o.scrollBy);else if("destroy"in i)return x.remove(),H.remove(),o.horizontal&&(C.remove(),R.remove()),void B.unwrap();s(0,V,!1,!0)}}else if(!(t.isPlainObject(i)&&"destroy"in i)){o.height="auto"==o.height?B.parent().height():o.height;var D=o.horizontal?"calc(100% - {0}px)".f(o.size):"100%",T=t(S).addClass(o.wrapperClass).css({position:"relative",overflow:"hidden",width:o.width,height:o.height});B.css({overflow:"hidden",width:o.width,height:o.height}),C=t(S).addClass(o.railClass).css({width:o.size,height:D,position:"absolute",top:0,display:o.alwaysVisible&&o.railVisible?"block":"none","border-radius":o.railBorderRadius,background:o.railColor,opacity:o.railOpacity,zIndex:90}),x=t(S).addClass(o.barClass).css({background:o.color,width:o.size,position:"absolute",top:0,opacity:o.opacity,display:o.alwaysVisible?"block":"none","border-radius":o.borderRadius,BorderRadius:o.borderRadius,MozBorderRadius:o.borderRadius,WebkitBorderRadius:o.borderRadius,zIndex:99}),o.horizontal&&(R=t(S).addClass(o.railClassH).css({width:D,height:o.size,position:"absolute",left:0,display:o.alwaysVisible&&o.railVisible?"block":"none","border-radius":o.railBorderRadius,background:o.railColor,opacity:o.railOpacity,zIndex:90}),H=t(S).addClass(o.barClassH).css({background:o.color,height:o.size,position:"absolute",left:0,opacity:o.opacity,display:o.alwaysVisible?"block":"none","border-radius":o.borderRadius,BorderRadius:o.borderRadius,MozBorderRadius:o.borderRadius,WebkitBorderRadius:o.borderRadius,zIndex:99}));var E="right"==o.position?{right:o.distance}:{left:o.distance};if(C.css(E),x.css(E),B.wrap(T),B.parent().append(x),B.parent().append(C),o.horizontal&&(E={bottom:o.distance},R.css(E),H.css(E),B.parent().append(H),B.parent().append(R)),o.railDraggable){var X=t(document);x.bind("mousedown",function(t){u=!0;var i=parseFloat(x.css("top")),e=t.pageY;return X.bind("mousemove.slimscroll",function(t){x.css("top",i+t.pageY-e),s(0,0,x.position().top,!1)}),X.bind("mouseup.slimscroll",function(t){u=!1,h(),X.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1}),o.horizontal&&H.bind("mousedown",function(t){u=!0;var i=parseFloat(H.css("left")),e=t.pageX;return X.bind("mousemove.slimscroll",function(t){H.css("left",i+t.pageX-e),s(0,0,H.position().left,!1)}),X.bind("mouseup.slimscroll",function(t){u=!1,h(),X.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1})}if(C.hover(function(){n()},function(){h()}),x.hover(function(){d=!0},function(){d=!1}),o.horizontal&&(R.hover(function(){n()},function(){h()}),H.hover(function(){d=!0},function(){d=!1})),B.hover(function(){c=!0,n(),h()},function(){c=!1,h()}),B.bind("touchstart",function(t,i){if(t.originalEvent.touches.length){var e=t.originalEvent.touches[0];m=e.pageX,w=e.pageY}}),B.bind("touchmove",function(t){if(W||t.originalEvent.preventDefault(),t.originalEvent.touches.length){var i=t.originalEvent.touches[0],e=(m-i.pageX)/o.touchScrollStep,a=(w-i.pageY)/o.touchScrollStep;s(e,a,!0),m=i.pageX,w=i.pageY}}),r(),l(),"bottom"==o.start)x.css({top:B.outerHeight()-x.outerHeight()}),s(0,0,!0);else if("top"!==o.start){var Y=t(o.start).position();s(Y.left,Y.top,null,!0),o.alwaysVisible||(x.hide(),H.hide())}a(this)}}),this}}),t.fn.extend({slimscroll:t.fn.slimScroll})}(jQuery);